<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8"/>
    <script src="https://miro.com/app/static/sdk.1.1.js"></script>
	
    <body>
        <div class="scrollable-container"></div>

        <input type="file" id="selfile" accept='.jpg' required><br>
        <img src="" name="image1" height='200' width='167'><br>

        従業員番号：<input type='text' name="emploee_id"><br>
        従業員氏名：<input type='text' name="emploee_name"><br>
        作業時間  ：<input type='text' name="timetable"><br>

        <button type="button" onclick='createwidgets()'>アップロード</button>
        <button id="close" onclick='closeWindow()'>閉じる</button>
        <br>
        
        </div>

        <script>
            var obj1 = document.getElementById("selfile");
            
            //ダイアログでファイル選択時に画像を表示する
            obj1.addEventListener("change",function(evt){
            
                var imagefile = evt.target.files[0];

	        var blobUrl = window.URL.createObjectURL(imagefile);

                document.all.image1.src = blobUrl;
            
            },false);

            function closeWindow(){
                miro.board.ui.closeModal();
            }

            function createwidgets(){
		
		var stickerText = document.all.emploee_id.value + "<br>" + document.all.emploee_name.value + "<br>" + document.all.timetable.value + "<br><br><br><br>";
                miro.board.widgets.create({
                    type: 'sticker',
                    text: stickerText,
                    scale: 0.85,
                    style: {stickerType:1, textAlign:'r', textAlignVertical:'t'}
                });

                miro.board.widgets.create({
                    type: 'image',
                    url: document.all.image1.src,
                    scale: 0.85,
                });                

                miro.board.ui.closeModal();
            }

        </script>        
      </body>    
    
</head>
</html>
